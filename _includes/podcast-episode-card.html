{% comment %}
  Podcast Episode Card Component
  Displays individual podcast episode with metadata and actions
{% endcomment %}

{% assign episode = include.episode %}
{% assign show_transcript = include.show_transcript | default: true %}
{% assign show_duration = include.show_duration | default: true %}
{% assign card_style = include.card_style | default: "pixel-card" %}

<article class="episode-card {{ card_style }}">
  <div class="episode-card__header">
    <img src="{{ episode.artwork | default: site.podcast.image | default: '/media/site_media/logos/scopecreepzip_logo_no_text.png' | relative_url }}" 
         alt="{{ episode.title }}" 
         class="episode-card__artwork">
    <div class="episode-card__meta">
      {% if episode.episode_number %}
      <span class="episode-card__number">Episode {{ episode.episode_number }}</span>
      {% endif %}
      <time class="episode-card__date" datetime="{{ episode.date | date_to_xmlschema }}">
        {{ episode.date | date: "%B %d, %Y" }}
      </time>
    </div>
  </div>
  
  <div class="episode-card__content">
    <h3 class="episode-card__title">
      <a href="{{ episode.url | relative_url }}">{{ episode.title }}</a>
    </h3>
    
    {% if episode.description %}
    <p class="episode-card__description">{{ episode.description | truncate: 150 }}</p>
    {% endif %}
    
    {% if episode.guest %}
    <div class="episode-card__guest">
      <span class="icon">üë•</span> Guest: {{ episode.guest }}
    </div>
    {% endif %}
    
    {% if show_duration and episode.duration %}
    <div class="episode-card__duration">
      <span class="icon">‚è±Ô∏è</span> {{ episode.duration }}
    </div>
    {% endif %}
    
    {% if episode.tags %}
    <div class="episode-card__tags">
      {% for tag in episode.tags %}
      <span class="episode-tag">{{ tag }}</span>
      {% endfor %}
    </div>
    {% endif %}
  </div>
  
  <div class="episode-card__actions">
    <a href="{{ episode.url | relative_url }}" class="btn btn-primary btn-sm">
      <span class="icon">üéß</span> Listen Now
    </a>
    
    {% if show_transcript and episode.transcript %}
    <a href="{{ episode.transcript | relative_url }}" class="btn btn-secondary btn-sm">
      <span class="icon">üìÑ</span> Transcript
    </a>
    {% endif %}
    
    {% if episode.show_notes %}
    <a href="{{ episode.show_notes | relative_url }}" class="btn btn-secondary btn-sm">
      <span class="icon">üìù</span> Show Notes
    </a>
    {% endif %}
  </div>
</article>

<style>
.episode-card {
  background: var(--white);
  border: 3px solid var(--kawaii-purple);
  border-radius: 16px;
  padding: 1.5rem;
  transition: all 0.3s ease;
  height: 100%;
  display: flex;
  flex-direction: column;
}

.episode-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 40px rgba(157, 78, 221, 0.3);
}

.episode-card__header {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
}

.episode-card__artwork {
  width: 80px;
  height: 80px;
  border-radius: 12px;
  object-fit: cover;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.episode-card__meta {
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 0.25rem;
}

.episode-card__number {
  color: var(--kawaii-purple);
  font-weight: 700;
  font-size: 0.875rem;
}

.episode-card__date {
  color: var(--text-muted);
  font-size: 0.875rem;
}

.episode-card__content {
  flex: 1;
  margin-bottom: 1rem;
}

.episode-card__title {
  font-size: 1.25rem;
  margin-bottom: 0.75rem;
}

.episode-card__title a {
  color: var(--text-dark);
  text-decoration: none;
  transition: color 0.3s ease;
}

.episode-card__title a:hover {
  color: var(--kawaii-purple);
}

.episode-card__description {
  color: var(--text-muted);
  line-height: 1.6;
  margin-bottom: 0.75rem;
}

.episode-card__guest,
.episode-card__duration {
  color: var(--text-purple);
  font-size: 0.875rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.episode-card__tags {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
  margin-top: 0.75rem;
}

.episode-tag {
  background: rgba(157, 78, 221, 0.1);
  color: var(--kawaii-purple);
  padding: 0.25rem 0.75rem;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 600;
}

.episode-card__actions {
  display: flex;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.episode-card__actions .btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

@media (max-width: 768px) {
  .episode-card__header {
    flex-direction: column;
    text-align: center;
  }
  
  .episode-card__artwork {
    margin: 0 auto;
  }
  
  .episode-card__actions {
    justify-content: center;
  }
}
</style>