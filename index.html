---
layout: default
title: Home
---

<!-- Hero Section -->
<section class="hero">
    <div class="container">
        <div class="hero-ornament">✦ ✦ ✦</div>
        <h1 class="hero-title">Security research & platform engineering for those who build <em>with magic</em></h1>
    </div>
</section>

<!-- About Section - The Coven -->
<section class="about" id="about">
    <div class="container">
        <header class="section-header">
            <span class="section-label">The Coven</span>
            <h2 class="section-title">Who We Are</h2>
            <p class="hero-text">We're Kali, Kat & Bill — A coven weaving security and infrastructure magic. We break and build things while sharing our deep magicks.</p>
            <div class="section-divider">⟡</div>
        </header>

        <div class="coven-carousel-container">
            <button class="carousel-nav carousel-nav--prev coven-nav" aria-label="Previous member">
                <span>‹</span>
            </button>

            <div class="coven-carousel">
                <div class="coven-track">
                    {% for member in site.data.team %}
                    {% assign github_username = member[1].social.github | split: "/" | last %}
                    <div class="coven-slide">
                        <article class="person-card">
                            <div class="person-header">
                                {% if member[1].avatar %}
                                <img src="{{ member[1].avatar }}" alt="{{ member[1].name }}" class="person-avatar" style="object-position: center 15%;">
                                {% else %}
                                <img src="https://github.com/{{ github_username }}.png" alt="{{ member[1].name }}" class="person-avatar">
                                {% endif %}
                                <div class="person-name-group">
                                    <h3 class="person-name">{{ member[1].name }}</h3>
                                    <span class="person-pronouns">({{ member[1].pronouns }})</span>
                                </div>
                            </div>
                            <p class="person-title">{{ member[1].title }}</p>
                            <p class="person-bio">{{ member[1].bio }}</p>
                            <div class="person-creds">
                                {% for credential in member[1].credentials %}
                                <span class="cred">{{ credential }}</span>
                                {% endfor %}
                            </div>
                            <div class="person-links">
                                {% if member[1].social.blog %}
                                <a href="{{ member[1].social.blog }}" class="person-link">Blog</a>
                                {% endif %}
                                {% if member[1].social.github %}
                                <a href="{{ member[1].social.github }}" class="person-link">GitHub</a>
                                {% endif %}
                                {% if member[1].social.bluesky %}
                                <a href="{{ member[1].social.bluesky }}" class="person-link">Bluesky</a>
                                {% endif %}
                            </div>
                        </article>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <button class="carousel-nav carousel-nav--next coven-nav" aria-label="Next member">
                <span>›</span>
            </button>
        </div>

        <div class="carousel-indicators coven-indicators">
            {% for member in site.data.team %}
            <button class="carousel-indicator {% if forloop.first %}active{% endif %}"
                    data-slide="{{ forloop.index0 }}"
                    aria-label="View {{ member[1].name }}">
            </button>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Our Craft Section - GitHub Repos -->
<section class="craft" id="craft">
    <div class="container">
        <header class="section-header">
            <span class="section-label">Our Craft</span>
            <h2 class="section-title">What We're Building</h2>
            <div class="section-divider">⟡</div>
        </header>

        <div class="craft-grid" id="github-repos">
            <div class="loading-state">Summoning repositories...</div>
        </div>

        <div class="craft-footer">
            <a href="https://github.com/ScopeCreep-zip" class="btn-link" target="_blank" rel="noopener">View all on GitHub →</a>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta" id="contact">
    <div class="container">
        <p class="cta-text">Ready to conjure something together?</p>
        <a href="/contact" class="btn btn-primary">Summon Us</a>
    </div>
</section>

<script>
    // Language colors for GitHub
    const langColors = {
        'Rust': '#dea584',
        'Nix': '#7e7eff',
        'HTML': '#e34c26',
        'SCSS': '#c6538c',
        'JavaScript': '#f1e05a',
        'TypeScript': '#3178c6',
        'Python': '#3572A5',
        'Go': '#00ADD8',
        'Shell': '#89e051'
    };

    // Format relative time
    function timeAgo(dateString) {
        const date = new Date(dateString);
        const now = new Date();
        const seconds = Math.floor((now - date) / 1000);

        const intervals = [
            { label: 'year', seconds: 31536000 },
            { label: 'month', seconds: 2592000 },
            { label: 'week', seconds: 604800 },
            { label: 'day', seconds: 86400 }
        ];

        for (const interval of intervals) {
            const count = Math.floor(seconds / interval.seconds);
            if (count >= 1) {
                return `${count} ${interval.label}${count > 1 ? 's' : ''} ago`;
            }
        }
        return 'recently';
    }

    // Fetch and render repos
    async function loadRepos() {
        const container = document.getElementById('github-repos');

        try {
            const response = await fetch('https://api.github.com/orgs/ScopeCreep-zip/repos?sort=updated&per_page=6');

            if (!response.ok) throw new Error('Failed to fetch');

            const repos = await response.json();

            const filtered = repos
                .filter(repo => repo.name !== 'website' && !repo.fork)
                .slice(0, 4);

            if (filtered.length === 0) {
                container.innerHTML = '<div class="error-state">No repositories found</div>';
                return;
            }

            container.innerHTML = filtered.map(repo => `
                <article class="craft-card">
                    <h3><a href="${repo.html_url}" target="_blank" rel="noopener">${repo.name}</a></h3>
                    <p>${repo.description || 'No description'}</p>
                    <div class="repo-meta">
                        ${repo.language ? `
                            <span class="repo-lang">
                                <span class="lang-dot" style="background: ${langColors[repo.language] || 'var(--gold-primary)'}"></span>
                                ${repo.language}
                            </span>
                        ` : ''}
                        <span>Updated ${timeAgo(repo.updated_at)}</span>
                    </div>
                </article>
            `).join('');

        } catch (error) {
            container.innerHTML = `
                <div class="error-state">
                    <p>Couldn't summon repositories</p>
                    <a href="https://github.com/ScopeCreep-zip" class="btn-link" target="_blank">Visit GitHub directly →</a>
                </div>
            `;
        }
    }

    document.addEventListener('DOMContentLoaded', loadRepos);
</script>

<script>
// Coven Carousel - Team Member Cards
document.addEventListener('DOMContentLoaded', function() {
    const carousel = document.querySelector('.coven-carousel');
    if (!carousel) return;

    const track = carousel.querySelector('.coven-track');
    const slides = Array.from(track.querySelectorAll('.coven-slide'));
    const prevButton = document.querySelector('.coven-nav.carousel-nav--prev');
    const nextButton = document.querySelector('.coven-nav.carousel-nav--next');
    const indicators = document.querySelectorAll('.coven-indicators .carousel-indicator');

    let currentIndex = 0;
    const totalSlides = slides.length;

    // Get visible slides count based on viewport
    function getVisibleSlides() {
        if (window.innerWidth <= 768) return 1;
        if (window.innerWidth <= 1024) return 2;
        return 3;
    }

    // Calculate max index based on visible slides
    function getMaxIndex() {
        const visible = getVisibleSlides();
        return Math.max(0, totalSlides - visible);
    }

    // Update track position
    function updateTrackPosition() {
        const slideWidth = 100 / getVisibleSlides();
        const offset = -currentIndex * slideWidth;
        track.style.transform = `translateX(${offset}%)`;
    }

    // Update indicators
    function updateIndicators() {
        indicators.forEach((indicator, index) => {
            indicator.classList.toggle('active', index === currentIndex);
        });
    }

    // Update button states
    function updateButtonStates() {
        const maxIndex = getMaxIndex();
        prevButton.style.opacity = currentIndex === 0 ? '0.3' : '1';
        prevButton.style.cursor = currentIndex === 0 ? 'not-allowed' : 'pointer';
        nextButton.style.opacity = currentIndex >= maxIndex ? '0.3' : '1';
        nextButton.style.cursor = currentIndex >= maxIndex ? 'not-allowed' : 'pointer';
    }

    // Go to specific slide
    function goToSlide(index) {
        const maxIndex = getMaxIndex();
        if (index < 0) {
            currentIndex = 0;
        } else if (index > maxIndex) {
            currentIndex = maxIndex;
        } else {
            currentIndex = index;
        }

        updateTrackPosition();
        updateIndicators();
        updateButtonStates();
    }

    // Event listeners
    prevButton.addEventListener('click', () => {
        if (currentIndex > 0) {
            goToSlide(currentIndex - 1);
        }
    });

    nextButton.addEventListener('click', () => {
        if (currentIndex < getMaxIndex()) {
            goToSlide(currentIndex + 1);
        }
    });

    // Indicator clicks
    indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => {
            goToSlide(index);
        });
    });

    // Keyboard navigation (only when carousel is in viewport)
    document.addEventListener('keydown', (e) => {
        const rect = carousel.getBoundingClientRect();
        const inViewport = rect.top < window.innerHeight && rect.bottom > 0;

        if (inViewport) {
            if (e.key === 'ArrowLeft') {
                goToSlide(currentIndex - 1);
            } else if (e.key === 'ArrowRight') {
                goToSlide(currentIndex + 1);
            }
        }
    });

    // Touch/swipe support
    let touchStartX = 0;
    let touchEndX = 0;

    carousel.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
    });

    carousel.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
    });

    function handleSwipe() {
        const swipeThreshold = 50;
        const diff = touchStartX - touchEndX;

        if (Math.abs(diff) > swipeThreshold) {
            if (diff > 0) {
                // Swiped left - go next
                goToSlide(currentIndex + 1);
            } else {
                // Swiped right - go previous
                goToSlide(currentIndex - 1);
            }
        }
    }

    // Handle window resize
    let resizeTimeout;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
            // Ensure currentIndex is valid after resize
            const maxIndex = getMaxIndex();
            if (currentIndex > maxIndex) {
                currentIndex = maxIndex;
            }
            updateTrackPosition();
            updateButtonStates();
        }, 250);
    });

    // Initialize
    updateTrackPosition();
    updateIndicators();
    updateButtonStates();
});
</script>
