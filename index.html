---
layout: default
title: Home
---

<!-- Hero Section -->
<section class="hero">
    <div class="container">
        <div class="hero-ornament">✦ ✦ ✦</div>
        <h1 class="hero-title">Security research & platform engineering for those who build <em>with magic</em></h1>
    </div>
</section>

<!-- About Section - The Coven -->
<section class="about" id="about">
    <div class="container">
        <header class="section-header">
            <span class="section-label">The Coven</span>
            <h2 class="section-title">Who We Are</h2>
            <p class="hero-text">We're Kali & Kat — Partners weaving security and infrastructure magic. We break and build things while sharing our deep magicks.</p>
            <div class="section-divider">⟡</div>
        </header>

        <div class="about-grid">
            {% for member in site.data.team %}
            {% assign github_username = member[1].social.github | split: "/" | last %}
            <article class="person-card">
                <div class="person-header">
                    <img src="https://github.com/{{ github_username }}.png" alt="{{ member[1].name }}" class="person-avatar">
                    <div class="person-info">
                        <h3 class="person-name">{{ member[1].name }}</h3>
                        <p class="person-title">{{ member[1].title }}</p>
                    </div>
                </div>
                <p class="person-bio">{{ member[1].bio }}</p>
                <div class="person-creds">
                    {% for credential in member[1].credentials %}
                    <span class="cred">{{ credential }}</span>
                    {% endfor %}
                </div>
                <div class="person-links">
                    {% if member[1].social.blog %}
                    <a href="{{ member[1].social.blog }}" class="person-link">Blog</a>
                    {% endif %}
                    {% if member[1].social.github %}
                    <a href="{{ member[1].social.github }}" class="person-link">GitHub</a>
                    {% endif %}
                    {% if member[1].social.bluesky %}
                    <a href="{{ member[1].social.bluesky }}" class="person-link">Bluesky</a>
                    {% endif %}
                </div>
            </article>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Our Craft Section - GitHub Repos -->
<section class="craft" id="craft">
    <div class="container">
        <header class="section-header">
            <span class="section-label">Our Craft</span>
            <h2 class="section-title">What We're Building</h2>
            <div class="section-divider">⟡</div>
        </header>

        <div class="craft-grid" id="github-repos">
            <div class="loading-state">Summoning repositories...</div>
        </div>

        <div class="craft-footer">
            <a href="https://github.com/ScopeCreep-zip" class="btn-link" target="_blank" rel="noopener">View all on GitHub →</a>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta" id="contact">
    <div class="container">
        <p class="cta-text">Ready to conjure something together?</p>
        <a href="/contact" class="btn btn-primary">Summon Us</a>
    </div>
</section>

<script>
    // Language colors for GitHub
    const langColors = {
        'Rust': '#dea584',
        'Nix': '#7e7eff',
        'HTML': '#e34c26',
        'SCSS': '#c6538c',
        'JavaScript': '#f1e05a',
        'TypeScript': '#3178c6',
        'Python': '#3572A5',
        'Go': '#00ADD8',
        'Shell': '#89e051'
    };

    // Format relative time
    function timeAgo(dateString) {
        const date = new Date(dateString);
        const now = new Date();
        const seconds = Math.floor((now - date) / 1000);

        const intervals = [
            { label: 'year', seconds: 31536000 },
            { label: 'month', seconds: 2592000 },
            { label: 'week', seconds: 604800 },
            { label: 'day', seconds: 86400 }
        ];

        for (const interval of intervals) {
            const count = Math.floor(seconds / interval.seconds);
            if (count >= 1) {
                return `${count} ${interval.label}${count > 1 ? 's' : ''} ago`;
            }
        }
        return 'recently';
    }

    // Fetch and render repos
    async function loadRepos() {
        const container = document.getElementById('github-repos');

        try {
            const response = await fetch('https://api.github.com/orgs/ScopeCreep-zip/repos?sort=updated&per_page=6');

            if (!response.ok) throw new Error('Failed to fetch');

            const repos = await response.json();

            const filtered = repos
                .filter(repo => repo.name !== 'website' && !repo.fork)
                .slice(0, 4);

            if (filtered.length === 0) {
                container.innerHTML = '<div class="error-state">No repositories found</div>';
                return;
            }

            container.innerHTML = filtered.map(repo => `
                <article class="craft-card">
                    <h3><a href="${repo.html_url}" target="_blank" rel="noopener">${repo.name}</a></h3>
                    <p>${repo.description || 'No description'}</p>
                    <div class="repo-meta">
                        ${repo.language ? `
                            <span class="repo-lang">
                                <span class="lang-dot" style="background: ${langColors[repo.language] || 'var(--gold-primary)'}"></span>
                                ${repo.language}
                            </span>
                        ` : ''}
                        <span>Updated ${timeAgo(repo.updated_at)}</span>
                    </div>
                </article>
            `).join('');

        } catch (error) {
            container.innerHTML = `
                <div class="error-state">
                    <p>Couldn't summon repositories</p>
                    <a href="https://github.com/ScopeCreep-zip" class="btn-link" target="_blank">Visit GitHub directly →</a>
                </div>
            `;
        }
    }

    document.addEventListener('DOMContentLoaded', loadRepos);
</script>
